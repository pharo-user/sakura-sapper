import{S as s,i as a,s as t,e,t as c,b as o,f as r,g as l,d as n,h as i,j as h,k as u,m as f,n as d,p as m,r as p,u as v,v as g,w as y,x as b,y as k,a as E,q as w,c as A,z as $,l as I,A as T,B as j,o as B,C as R}from"./client.6d0ece0f.js";import{e as _}from"./env.1e348bdf.js";var O=async(s,a)=>{a(!0);try{await s}catch(s){console.log("promiser aborted"+s)}a(!1)};function P(s){let a,t;return{c(){a=e("div"),t=c(s[0]),this.h()},l(e){a=o(e,"DIV",{class:!0});var c=r(a);t=l(c,s[0]),c.forEach(n),this.h()},h(){i(a,"class","LoadingIndicator svelte-hef77f")},m(s,e){h(s,a,e),u(a,t)},p(s,[a]){1&a&&f(t,s[0])},i:d,o:d,d(s){s&&n(a)}}}function S(s,a,t){let e="";async function c(){3===e.length&&t(0,e=""),t(0,e+="."),await new Promise((s=>setTimeout(s,300))),c()}return m((()=>{c()})),[e]}class x extends s{constructor(s){super(),a(this,s,S,P,t,{})}}function D(s){let a,t;return{c(){a=e("h2"),t=c(s[1])},l(e){a=o(e,"H2",{});var c=r(a);t=l(c,s[1]),c.forEach(n)},m(s,e){h(s,a,e),u(a,t)},p(s,a){2&a&&f(t,s[1])},d(s){s&&n(a)}}}function K(s){let a,t;return a=new x({}),{c(){p(a.$$.fragment)},l(s){v(a.$$.fragment,s)},m(s,e){g(a,s,e),t=!0},i(s){t||(y(a.$$.fragment,s),t=!0)},o(s){b(a.$$.fragment,s),t=!1},d(s){k(a,s)}}}function N(s){let a,t,f,m,p,v,g,k,I,B,R,O,P,S,x,N,U,V,C,H,W,q,z,J,L,F,G,M,Q,X,Y=_.flag_stats,Z=""!=s[1]&&D(s),ss=function(s){let a,t,f,m;return{c(){a=e("button"),t=c("Import Product"),this.h()},l(s){a=o(s,"BUTTON",{class:!0});var e=r(a);t=l(e,"Import Product"),e.forEach(n),this.h()},h(){i(a,"class","svelte-1593e8c")},m(e,c){h(e,a,c),u(a,t),f||(m=T(a,"click",s[7]),f=!0)},p:d,d(s){s&&n(a),f=!1,m()}}}(s),as=s[0]&&K();return{c(){a=E(),t=e("br"),f=E(),m=e("br"),p=E(),v=e("div"),g=e("h1"),k=c("SAKURA NETWORK"),I=E(),B=E(),R=E(),Z&&Z.c(),O=E(),P=E(),ss&&ss.c(),S=E(),x=e("div"),as&&as.c(),N=E(),U=e("p"),V=c("click "),C=e("a"),H=c("here"),W=c(" to go back to "),q=e("b"),z=c(s[3]),J=c("\n\n\tor click "),L=e("a"),F=c("here"),G=c(" in order to access "),M=e("b"),Q=c("sakura.eco"),this.h()},l(e){w('[data-svelte="svelte-mc1kyo"]',document.head).forEach(n),a=A(e),t=o(e,"BR",{}),f=A(e),m=o(e,"BR",{}),p=A(e),v=o(e,"DIV",{class:!0});var c=r(v);g=o(c,"H1",{class:!0});var i=r(g);k=l(i,"SAKURA NETWORK"),i.forEach(n),I=A(c),B=A(c),R=A(c),Z&&Z.l(c),O=A(c),P=A(c),ss&&ss.l(c),S=A(c),x=o(c,"DIV",{class:!0});var h=r(x);as&&as.l(h),h.forEach(n),N=A(c),U=o(c,"P",{});var u=r(U);V=l(u,"click "),C=o(u,"A",{href:!0,class:!0});var d=r(C);H=l(d,"here"),d.forEach(n),W=l(u," to go back to "),q=o(u,"B",{});var y=r(q);z=l(y,s[3]),y.forEach(n),J=l(u,"\n\n\tor click "),L=o(u,"A",{href:!0,class:!0});var b=r(L);F=l(b,"here"),b.forEach(n),G=l(u," in order to access "),M=o(u,"B",{});var E=r(M);Q=l(E,"sakura.eco"),E.forEach(n),u.forEach(n),c.forEach(n),this.h()},h(){document.title="Dashboard",i(g,"class","svelte-1593e8c"),i(x,"class","svelte-1593e8c"),i(C,"href",s[3]),i(C,"class","svelte-1593e8c"),i(L,"href",_.sakura_url),i(L,"class","svelte-1593e8c"),i(v,"class","svelte-1593e8c")},m(s,e){h(s,a,e),h(s,t,e),h(s,f,e),h(s,m,e),h(s,p,e),h(s,v,e),u(v,g),u(g,k),u(v,I),u(v,B),u(v,R),Z&&Z.m(v,null),u(v,O),u(v,P),ss&&ss.m(v,null),u(v,S),u(v,x),as&&as.m(x,null),u(v,N),u(v,U),u(U,V),u(U,C),u(C,H),u(U,W),u(U,q),u(q,z),u(U,J),u(U,L),u(L,F),u(U,G),u(U,M),u(M,Q),X=!0},p(s,[a]){""!=s[1]?Z?Z.p(s,a):(Z=D(s),Z.c(),Z.m(v,O)):Z&&(Z.d(1),Z=null),s[0]?as?1&a&&y(as,1):(as=K(),as.c(),y(as,1),as.m(x,null)):as&&(j(),b(as,1,1,(()=>{as=null})),$())},i(s){X||(y(Y),y(as),X=!0)},o(s){b(Y),b(as),X=!1},d(s){s&&n(a),s&&n(t),s&&n(f),s&&n(m),s&&n(p),s&&n(v),Z&&Z.d(),ss&&ss.d(),as&&as.d()}}}function U(s,a,t){let e,c;I(s,B,(s=>t(8,e=s))),I(s,R,(s=>t(2,c=s)));let o=!1,r="";async function l(){console.log("import_product");let s=await async function(s,a,t){let e={shop_url:a,company_id:t},c=s+"/api/shopify/import";return await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((s=>s.json())).then((s=>s))}(_.sakura_url,e,c);console.log("doImportArticles called"),console.log(s.status+": "+s.message),"success"==s.status?t(1,r="import completed"):t(1,r="import aborted")}async function n(){console.log("install");let s=await async function(s){let a="https://sakura.eco/api/shopify/widget/"+s;return await fetch(a,{mode:"cors"}).then((s=>s.json())).then((s=>s))}(B);console.log(s),"success"==s.status?goto("./dashboard"):goto("./")}return[o,r,c,"https://"+e,l,n,()=>O(n(),(s=>t(0,o=s))),()=>O(l(),(s=>t(0,o=s)))]}export default class extends s{constructor(s){super(),a(this,s,U,N,t,{})}}
